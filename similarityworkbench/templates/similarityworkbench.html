<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
	<head>
                <link rel="stylesheet" href="/static/admin/similarity/main.css" type="text/css" />
                <link rel="stylesheet" href="/static/admin/similarity/screen.css" type="text/css" media="screen"/>
                <link rel="stylesheet" href="/static/admin/similarity/jquery-ui.css" type="text/css" media="screen"/>
                <script src="/static/admin/similarity/jquery.js" type="text/javascript"></script>
                <script src="/static/admin/similarity/jquery-ui.js" type="text/javascript"></script>
                <script src="/static/admin/similarity/jquery.form.js" type="text/javascript"></script>
                <script src="/static/admin/similarity/jquery.dimensions.js" type="text/javascript"></script>
                <script src="/static/admin/similarity/jquery.scrollTo.js" type="text/javascript"></script>

		<script src="/static/admin/similarity/similarity.js" type="text/javascript"></script>
		<style type="text/css">
			body {width:100%; margin:0}
			.container {
				width: 100%; margin-top: 0; min-width: 960px;
			}
			.container h2 {margin-top:0 !important; padding-top: 0; background:rgba(65,105,165,0.9); color:rgba(240,240,255,0.8); border-bottom:2px solid rgb(65,105,165)}
			h2 a {text-decoration: none; } 
			h2 span {position:relative; left:20px}
			#ajaxstatus {text-align:center; width:150px; right: 0; top: -20px; height:1em; position:fixed; z-index:6}
			#ajaxstatus div {margin: 35px 15% 1px 15%; width:70%; background-color:#FBB917; color:red; font-weight: bold;}
			.bigbutton {display:block; width:20em; border:1px solid #6666FF; text-align:center; text-decoration:none; margin:3px 0 3px 0}
			.bigbuttonhighlighted {border-color: #FBB917; background-color: #FBB917; color: white; font-weight:bold}
			

			#similarity-page div#compoundarea .compound {width:200px; position:absolute; cursor:move; border:1px solid rgba(65,105,165,0.5); margin-bottom:100px}
			#similarity-page div#compoundarea .compound .title {text-align:center; background-color: #879bbd; padding: 5px 0;   background-image: -webkit-gradient(linear, 0% 0%, 0% 95%, from(#abd), to(#89d)); position:relative; top:-2px; color:white}
			
			#similarity-page div#compoundarea .selectedcompound {background-color:#899add !important;}
			#similarity-page div#compoundarea .compoundhover {background-color:#899add; border:2px solid #899add;}
			#similarity-page .compound {background: white; 	-moz-box-shadow: 3px 0 3px #abd; -webkit-box-shadow: 0px 3px 5px #abd; -o-box-shadow:3px 0 3px #abd;}
			#similarity-page div#compoundarea .compound input, div#compoundarea .compound label {display:none}
			#similarity-page div#compoundarea .compoundhover input, #similarity-page div#compoundarea .compoundhover label, #similarity-page div#compoundarea .selectedcompound input, #similarity-page div#compoundarea .selectedcompound label{display:inline !important; color:white}
			#similarity-page #similarity {width:340px; text-align:center; background-color:#777; color:#eee; position:fixed; top:70px; left:-370px; padding:15px; -webkit-border-top-right-radius: 10px; -webkit-border-bottom-right-radius: 10px; -moz-border-radius: 0 10px 10px 0; z-index:5}
			#similarity-page #startmcs {width:120px; margin-left: 100px; border-color: #FBB917; background-color: black; color: white; font-weight:bold}
			#similarity-page .deletecompound {float:right; width:30px; text-align:center; position:relative; left:-2px; top:-2px; font-size:1.1em;text-decoration:none; font-size: 12px; width:12px; color:red; z-index:5}
			#similarity-page .compound .deletecompound {display:none}
			#similarity-page .compoundhover .deletecompound, #similarity-page .selectedcompound .deletecompound {display:block !important}
			#similarity-page .compound label {font-size:.8em;}
			#similarity-page #mcs-result {background-color:#777; width:220px; height:250px; margin-left:50px; display:none}
			#similarity-page #uploadareactrl {position:fixed; top:-10px; right:100px; width:200px; background-color: #777; color:#eee; text-align:center; z-index:5; padding:10px; -webkit-border-bottom-left-radius: 20px; -webkit-border-bottom-right-radius: 20px; -moz-border-radius: 0 0 20px 20px}
			#similarity-page #selectionnotice {position:fixed; top:70px; left:-10px; width:200px; font-size: 80%; background-color: rgba(119,119,119,0.8); color:#eee; text-align:center; z-index:5; padding:10px; -webkit-border-top-right-radius: 10px; -webkit-border-bottom-right-radius: 10px; -moz-border-radius: 0 20px 20px 0}
			#similarity-page #uploadarea {width:660px; border:3px solid #999; background-color:#777; padding:1em; position:fixed; top:-10px; right:10px; z-index:5; -webkit-border-bottom-left-radius: 20px; -webkit-border-bottom-right-radius: 20px; -moz-border-radius: 0 0 20px 20px}
			#similarity-page #uploadarea .content {width:600px; background-color:#ccc; padding: 10px 30px 10px 30px; -webkit-border-radius: 5px; -moz-border-radius: 5px}
			#similarity-page #uploadarea textarea {width:590px;}
			#similarity-page #closesimilarity, #similarity-page #closeuploadbtn {display:block; text-align:center; text-decoration:none; font-size: 12px; width:12px; color:red; font-weight:bold;}
			#similarity-page #closeuploadbtn {position:absolute; left:650px;}
			#similarity-page #closesimilarity {position:absolute; left:349px; top:3px}
			.bottombar {position:fixed; bottom:0; border-top:3px solid #dde; padding-top:10px; padding-bottom:10px; background-color: #ccd; width:99.9%; min-width:960px; z-index:5}
			.bottombar form {display:inline; border:1px solid #eee; background-color: #f5f5f5; margin-left:10px; font-size:80%;}
			.bottombar form {padding: 5px; vertical-align:center}
			.bottombar form label {color:#666}
			.bottombar a {padding: 2px 5px}
			.bottombar textarea{
				position: relative;top: 5px;
			}
			#loadstatus {margin-right:10px; color:#000}
			.huge {width:50%; position:relative; left:25%; top:150px; font-size:200%; padding: 50px !important; font-weight:bold}
		</style>
		<title>
			ChemMine - Similarity Workbench 
		</title>
		<script type="text/javascript">
			var preload = {%if preload%}{{preload|safe}}{%else%} null {%endif%};
		</script>
	</head>
	
	
	<body id="similarity-page"><div class="container">
		<h2><a href="/">Chemmine Tools</a> <span>Similarity WorkBench</span></h2>
		<div id="ajaxstatus"><div style="display:none"></div></div>
		
		<div id="similarity" class="outofsight">
			<a id="closesimilarity" href="#" title="Hide this box">&#x2715;</a>
			<b><acronym title="Atom Pair descriptors with Tanimoto similarity coefficient">AP Tanimoto</acronym> Similarity:</b><span id="similarityvalue"></span>
			<div id="mcssimilarities">
				<div><b><acronym title="Maximum Common Substructure">MCS</acronym> Size:</b><span id="mcssize"></span></div>
				<div><b><acronym title="(atom number in MCS) / (atom number in smaller molecule)">MCS MIN</acronym> Similarity:</b><span id="mcsmin"></span></div>
				<div><b><acronym title="(atom number in MCS) / (atom number in larger molecule)">MCS MAX</acronym> Similarity:</b><span id="mcsmax"></span></div>
				<div><b><acronym title="(atom number in MCS) / (atom number in smaller molecule + atom number in larger molecule - atom number in MCS)">MCS Tanimoto</acronym> Similarity:</b><span id="mcstanimoto"></span></div>
			</div>
			<a class="bigbutton" id="startmcs" href="#">Load MCS</a>
			<div id="mcs-result">
				<script type="text/template">
				<img src="@url" width="200"/>
				<a href="#" class="bigbutton" id="addmcsresult" style="width:150px; margin-left:35px; background:white; color:#333">Add to Workspace</a>
				</script>
			</div>
		</div>
		<div id="selectionnotice">Awaiting <span id="num_selection">2</span> selected compounds</div>
		<form name="compoundsel" id="compoundsel" action="." method="post">
		{% csrf_token %}
			<input type="hidden" name="func" value="mcs"/>
			<input type="hidden" name="compound" value=""/>
			<input type="hidden" name="compound" value=""/>
		</form>
		<form>
		{% csrf_token %}
			<div id="compoundarea" style="display:none">
				<script type="text/template">
				<div class="compound" id="compound@id" style="display:none">
					<a href="#" class="deletecompound" title="delete this compound">&#x2715;</a>
					<div class="title" id="@md5">@name</div>
					<img src="@url" width="200"/>
					<input type="checkbox" class="compoundcheck" name="check@md5"/><label>Select to calculate similarity</label>
				</div>
				</script>
			</div>
		</form>
		<div class="bottombar">
			<div style="float:right">
				<span id="loadstatus"></span>
			</div>
			<a class="resetworkspace button" style="margin-left:10px; font-size:.8em; font-family:Verdana" href="#">Clear</a>
			<a class="button" style="margin-left:10px; font-size:.8em; font-family:Verdana" href="#">Add Workbench Compounds</a>
			<form action="." method="post" enctype="multipart/form-data" name="uploadform1" id="uploadform1">
{% csrf_token %}
			<label for="sdffile">Add compounds using SMILES:</label>
			<textarea id="smiles" cols="20" rows="1" name="smiles"></textarea>
			<input type="hidden" name="func" value="smiles"/>
			<input type="submit" value="Add"/>
			</form>
			<form action="." method="post" enctype="multipart/form-data" name="uploadform2" id="uploadform2">
			{% csrf_token %}
			<label for="sdffile">Add More Compounds by uploading SDF:</label>
			<input type="file" id="sdffile" size="5" name="sdffile"/>
			<input type="hidden" name="func" value="sdf"/>
			<input type="submit" value="Add"/>
			</form>
		</div>
	</div></body>
</html>
